{"version":3,"sources":["Home.js","Setting.js","Wishlist.js","Homelocal.js","App.js","serviceWorker.js","index.js"],"names":["customStyles","content","top","left","right","bottom","marginRight","transform","Modal","setAppElement","Home","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","userdata","date","Date","receptionDate","stamp","stamptime","deadline","default_month_days","month_days","shifttimes","startTime","endTime","complementdaysText","wishdays","default_comments","comments","wishday","comment","nowprintcommentday","modalIsOpen","isUpdateshift","setdefaultshifts","bind","assertThisInitialized","setdefaultcomment","getDateReception","dayspreOnclick","daysbackOnclick","dayspreback","wishdayOnchange","commentOnchange","openModal","afterOpenModal","closeModal","setShiftTime","startTimeChange","endTimeChange","addDataOnClick","shiftupdateChecker","_this2","fetch","then","res","json","data","setState","_this3","react_default","a","createElement","username","react_router_dom","to","href","getFullYear","getMonth","getDate","id","onClick","onClickstamp","entry_default","locale","calendarType","value","tileContent","getTileContent","onChange","dayClick","map","days","key","type","name","lib_default","isOpen","onAfterOpen","onRequestClose","style","contentLabel","time","year","month","day","slice","deflist","list","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","shift","text","detail","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","num","recepdate","firstdate","com","wish","concat","receptionday","setday","_ref","view","getFormatDate","dayslist","clickday","clickdate","str","printday","datearr","substr","split","nowdate","getintdate","e","target","alert","defshift","newshift","newshiftdata","shiftday","deleteshiftdata","updateshiftdata","length","dbUpdater","addcommentdata","push","updatecommentdata","console","log","method","body","JSON","stringify","headers","Content-Type","mode","url","_this4","postdata","_this5","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Component","useStyles","makeStyles","theme","container","display","flexWrap","input","margin","spacing","Setting","pushtoHome","history","worktime","memberlist","administerlist","nonadministerlist","addministeroption","ischangeworktime","test","memberModalopen","administerModalopen","isAddadminister","loadmemberlist","onChangeusername","updateUsername","onChangeworktime","setworktime","onClickunsubsribe","openmemberModal","closememberModal","closeadministerModal","onChangeaddministeroption","onClickadminister","administer","adlist","nonadlist","user","src","picture","displayName","Input","className","inputProps","aria-label","checked","pathname","query","pass","member","userid","userId","onClickdeletemember","onClickdeleteadminister","onClickaddAdminister","window","confirm","_this6","_this7","_this8","root","width","marginTop","overflowX","table","minWidth","Wishlist","location","accessable","allshiftdata","printlist","deadlineearly","deallinelate","startdate","printdays","setprintDays","sortmembershift","classes","Paper","Table","TableHead","TableRow","TableCell","TableBody","component","scope","i","findate","members","shifts","printdate","printfinaldate","shiftlist","Array","membertoshift","myshift","fill","sd","String","shiftyear","parseInt","shiftmonth","Homelocal","Top","setRedirect","redirect","renderRedirect","react_router","getTest","App","exact","path","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.56fd333b.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Calendar from 'react-calendar';\r\nimport Modal from 'react-modal';\r\n\r\nconst customStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)'\r\n    }\r\n};\r\nModal.setAppElement('#root')\r\n\r\nclass Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userdata: [],//ユーザー情報\r\n            date: new Date(),//today\r\n            receptionDate: new Date(),//受付中\r\n            stamp: \"x\",//シフトに記入する文字\r\n            stamptime: \"\",//時間希望\r\n            deadline: \"\",//締め切り\r\n            default_month_days: [],//defaultのシフト情報\r\n            month_days: [],//更新されるシフト情報\r\n            shifttimes: [\"09:00\", \"09:30\", \"10:00\", \"10:30\", \"11:00\", \"11:30\", \"12:00\", \"12:30\",\r\n                \"13:00\", \"13:30\", \"14:00\", \"14:30\", \"15:00\", \"15:30\",\r\n                \"16:00\", \"16:30\", \"17:00\", \"17:30\", \"18:00\", \"18:30\",\r\n                \"19:00\", \"19:30\", \"20:00\", \"20:30\", \"21:00\", \"21:30\",\r\n                \"22:00\", \"22:30\", \"23:00\", \"23:30\", \"23:45\"],//選択可能時間\r\n            startTime: \"09:00\",\r\n            endTime: \"09:00\",\r\n            complementdaysText: \"\",\r\n            wishdays: [\"\", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],//選択希望日数\r\n            default_comments: [],//defaultのコメント\r\n            comments: [],//dbから\r\n            wishday: \"\",//希望日数\r\n            comment: \"\",//希望コメント\r\n            nowprintcommentday: \"\",\r\n            modalIsOpen: false,//モーダル判定\r\n            isUpdateshift: []//シフト更新\r\n        }\r\n        this.setdefaultshifts = this.setdefaultshifts.bind(this);\r\n        this.setdefaultcomment = this.setdefaultcomment.bind(this);\r\n        this.getDateReception = this.getDateReception.bind(this);\r\n        this.dayspreOnclick = this.dayspreOnclick.bind(this);\r\n        this.daysbackOnclick = this.daysbackOnclick.bind(this);\r\n        this.dayspreback = this.dayspreback.bind(this);\r\n        this.wishdayOnchange = this.wishdayOnchange.bind(this);\r\n        this.commentOnchange = this.commentOnchange.bind(this);\r\n        this.openModal = this.openModal.bind(this);\r\n        this.afterOpenModal = this.afterOpenModal.bind(this);\r\n        this.closeModal = this.closeModal.bind(this);\r\n        this.setShiftTime = this.setShiftTime.bind(this);\r\n        this.startTimeChange = this.startTimeChange.bind(this);\r\n        this.endTimeChange = this.endTimeChange.bind(this);\r\n        this.addDataOnClick = this.addDataOnClick.bind(this);\r\n        this.shiftupdateChecker = this.shiftupdateChecker.bind(this);\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.getDateReception();\r\n        //ユーザーデータ取得\r\n        fetch('/userdata')\r\n            //fetch('/testuserdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setState({ userdata: data }))\r\n        //シフトデータ取得\r\n        fetch('/shiftdata')\r\n            //fetch('/testshiftdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setdefaultshifts(data))\r\n        //コメントデータ取得\r\n        fetch('/getcommentdata')\r\n            //fetch('/testgetcommentdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setdefaultcomment(data))\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>シフト希望</h1>\r\n                ようこそ{this.state.userdata.username}さん\r\n                <Link to=\"/Setting\">設定</Link>\r\n                <a href=\"/logout\">logout</a>\r\n                <h2>{this.state.receptionDate.getFullYear()} {this.state.receptionDate.getMonth() + 1}月\r\n                {this.state.receptionDate.getDate()}日～受付中</h2>\r\n\r\n                <div id=\"dateText\">{this.state.deadline}</div>\r\n                <button id=\"batu\" onClick={this.onClickstamp.bind(this, \"x\")}>×</button>\r\n                <button id=\"sankaku\" onClick={this.onClickstamp.bind(this, \"△\")}>△</button>\r\n                <button id=\"timeset\" onClick={this.onClickstamp.bind(this, \"time\")}>Time</button>\r\n                <div id=\"calendar\"></div>\r\n                <Calendar\r\n                    locale=\"ja-JP\"\r\n                    calendarType=\"US\"\r\n                    value={this.state.receptionDate}\r\n                    tileContent={this.getTileContent.bind(this)}\r\n                    onChange={(value) => this.dayClick(value)}\r\n                />\r\n                <div>\r\n                    補足希望:{this.state.complementdaysText}\r\n                    <button onClick={this.dayspreOnclick}>◁</button>\r\n                    <button onClick={this.daysbackOnclick}>▷</button>\r\n                    <br />\r\n                    <div>\r\n                        希望出勤日数：\r\n                    <select onChange={this.wishdayOnchange} value={this.state.wishday}>\r\n                            {this.state.wishdays.map(days =>\r\n                                <option key={days}>{days}</option>)}\r\n                        </select>日\r\n                </div>\r\n\r\n                    <div>\r\n                        伝言：\r\n                    <input type=\"textarea\" name=\"comment\" value={this.state.comment} onChange={this.commentOnchange}></input>\r\n                        <button onClick={this.addDataOnClick}>登録</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <Modal\r\n                    isOpen={this.state.modalIsOpen}\r\n                    onAfterOpen={this.afterOpenModal}\r\n                    onRequestClose={this.closeModal}\r\n                    style={customStyles}\r\n                    contentLabel=\"worktime Modal\"\r\n                >\r\n                    <h2>出勤可能時間を選択</h2>\r\n                    <div>\r\n                        <select onChange={this.startTimeChange} value={this.state.startTime}>\r\n                            {this.state.shifttimes.map(time =>\r\n                                <option key={time}>{time}</option>\r\n                            )}\r\n                        </select>～\r\n                    <select onChange={this.endTimeChange} value={this.state.endTime}>\r\n                            {this.state.shifttimes.map(time =>\r\n                                <option key={time}>{time}</option>\r\n                            )}\r\n                        </select>\r\n                    </div>\r\n                    <button onClick={this.closeModal}>閉じる</button>\r\n                    <button onClick={this.setShiftTime}>決定</button>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n    getintdate(year, month, day) {\r\n        return year + (\"0\" + (month + 1)).slice(-2) + (\"0\" + day).slice(-2);\r\n    }\r\n    //json変換\r\n    setdefaultshifts(data) {\r\n        const deflist = [];\r\n        const list = [];\r\n        for (let shift of data) {\r\n            list[shift.date] = { text: shift.detail }\r\n            deflist[shift.date] = { text: shift.detail }\r\n        }\r\n        this.setState({\r\n            default_month_days: deflist,\r\n            month_days: list\r\n        })\r\n    }\r\n    //commentSetting\r\n    setdefaultcomment(data) {\r\n        if (data !== \"\") {\r\n            const deflist = [];\r\n            const list = [];\r\n            for (const comment of data) {\r\n                const date = new Date(comment.date);\r\n                const num = date.getFullYear() + (\"0\" + (date.getMonth() + 1)).slice(-2) + (\"0\" + date.getDate()).slice(-2);\r\n                list[num] = { comment: comment.text, wishday: comment.wishday }\r\n                deflist[num] = { comment: comment.text, wishday: comment.wishday }\r\n            }\r\n            //締め切りの初期コメント設定\r\n            const recepdate = this.state.receptionDate;\r\n            const firstdate = recepdate.getFullYear() + (\"0\" + (recepdate.getMonth() + 1)).slice(-2) + (\"0\" + recepdate.getDate()).slice(-2);\r\n            let com = \"\";\r\n            let wish = \"\";\r\n            if (list[firstdate] != null) {\r\n                com = list[firstdate].comment;\r\n                wish = list[firstdate].wishday;\r\n            }\r\n            this.setState({\r\n                default_comments: deflist,\r\n                comments: list,\r\n                comment: com,\r\n                wishday: wish,\r\n                nowprintcommentday: firstdate\r\n            })\r\n        }\r\n    }\r\n    getFormatDate(date) {\r\n        return `${date.getFullYear()}${('0' + (date.getMonth() + 1)).slice(-2)}${('0' + date.getDate()).slice(-2)}`;\r\n    }\r\n    //受付中日にち\r\n    getDateReception() {\r\n        let year = this.state.date.getFullYear();\r\n        let month = this.state.date.getMonth() + 1;\r\n        const day = this.state.date.getDate();\r\n        let receptionday = \"\";\r\n        let deadline = \"\";\r\n        let setday = \"\";\r\n        if (day <= 10) {\r\n            //締め切り\r\n            const finaldate = new Date(year, month, 0);\r\n            receptionday = month + \"/16～\" + month + \"/\" + finaldate.getDate();\r\n            deadline = month + \"/10まで(\" + receptionday + \")\"\r\n            //今月16～末日まで\r\n            setday = year + \"/\" + month + \"/16\";\r\n        } else if (day > 24) {\r\n            //年越し処理\r\n            if (month === 12) {\r\n                year++;\r\n                month = 0;\r\n            }\r\n            //締め切り\r\n            const finaldate = new Date(year, month, 0);\r\n            receptionday = (month + 1) + \"/16～\" + (month + 1) + \"/\" + finaldate.getDate();\r\n            deadline = (month + 1) + \"/10まで(\" + receptionday + \")\"\r\n            //来月16～末日\r\n            setday = year + \"/\" + (month + 1) + \"/16\";\r\n        } else {\r\n            //年越し処理\r\n            if (month === 12) {\r\n                year++;\r\n                month = 0;\r\n            }\r\n            //締め切り\r\n            receptionday = (month + 1) + \"/1～\" + (month + 1) + \"/15\";\r\n            deadline = month + \"/24まで(\" + receptionday + \")\"\r\n            //来月1～15まで\r\n            setday = year + \"/\" + (month + 1) + \"/1\";\r\n        }\r\n        this.setState({\r\n            complementdaysText: receptionday,\r\n            deadline: deadline,\r\n            receptionDate: new Date(setday)\r\n        })\r\n    }\r\n    getTileContent({ date, view }) {\r\n        // 月表示のときのみ\r\n        if (view !== 'month') {\r\n            return null;\r\n        }\r\n        const day = this.getFormatDate(date);\r\n        return (\r\n            <p>\r\n                {(this.state.month_days[day] && this.state.month_days[day].text) ?\r\n                    this.state.month_days[day].text : '  '\r\n                }\r\n            </p>\r\n        );\r\n    }\r\n\r\n    //スタンプ変換\r\n    onClickstamp(value) {\r\n        this.setState({\r\n            stamp: value\r\n        })\r\n    }\r\n    //日付クリック\r\n    dayClick(value) {\r\n        //受付中か\r\n        if (this.state.receptionDate <= value) {\r\n            const dayslist = this.state.month_days;\r\n            const clickday = value.getFullYear() + (\"0\" + (value.getMonth() + 1)).slice(-2) + (\"0\" + value.getDate()).slice(-2);\r\n            this.setState({ clickdate: clickday })\r\n            //空or重複判定\r\n            if (null == dayslist[clickday] || \"\" === dayslist[clickday].text) {\r\n                //stampが記号か日付で分岐\r\n                if (this.state.stamp === \"time\") {\r\n                    this.openModal();\r\n\r\n                } else {\r\n                    dayslist[clickday] = { text: this.state.stamp }\r\n                    this.setState({ month_days: dayslist })\r\n                }\r\n                //stamp一致クリック\r\n            } else if (this.state.stamp === dayslist[clickday].text) {\r\n                dayslist[clickday] = { text: \"\" }\r\n                this.setState({ month_days: dayslist })\r\n            } else if (this.state.stamp !== dayslist[clickday].text) {\r\n                //stampが記号か日付で分岐\r\n                if (this.state.stamp === \"time\") {\r\n                    //this.openModal();\r\n                    dayslist[clickday] = { text: \"\" }\r\n                } else {\r\n                    dayslist[clickday] = { text: this.state.stamp }\r\n                    this.setState({ month_days: dayslist })\r\n                }\r\n            }\r\n        }\r\n    }\r\n    dayspreOnclick() {\r\n        //前へ処理\r\n        this.dayspreback(\"pre\");\r\n    }\r\n    daysbackOnclick() {\r\n        //後へ処理\r\n        this.dayspreback(\"back\")\r\n    }\r\n    dayspreback(str) {\r\n        this.state.comments[this.state.nowprintcommentday] = {\r\n            comment: this.state.comment,\r\n            wishday: this.state.wishday\r\n        }\r\n        //nowprintcommentday\r\n        const printday = this.state.nowprintcommentday;\r\n        const datearr = (printday.substr(0, 4) + '/' + printday.substr(4, 2) + '/' + printday.substr(6, 2)).split('/');\r\n        const nowdate = new Date(datearr[0], datearr[1] - 1, datearr[2]);\r\n        let year = nowdate.getFullYear();\r\n        let month = nowdate.getMonth();\r\n        let day = nowdate.getDate();\r\n\r\n\r\n        if (str === \"pre\") {\r\n            if (day === 16) {\r\n                day = 1;\r\n            } else {\r\n                if (month === 0) {\r\n                    year--;\r\n                    month = 11;\r\n                    day = 16;\r\n                } else {\r\n                    month--;\r\n                    day = 16;\r\n                }\r\n            }\r\n        } else if (str === \"back\") {\r\n            //\r\n            if (day === 1) {\r\n                day = 16;\r\n            } else {\r\n                if (month === 11) {\r\n                    year++;\r\n                    month = 0;\r\n                    day = 1;\r\n                } else {\r\n                    month++;\r\n                    day = 1;\r\n                }\r\n            }\r\n        }\r\n        //complementdaysText\r\n        let text = \"\";\r\n        if (day === 16) {\r\n            const finaldate = new Date(year, month, 0);\r\n            text = (month + 1) + \"/\" + day + \"～\" + (month + 1) + \"/\" + finaldate.getDate();\r\n        } else {\r\n            text = (month + 1) + \"/\" + day + \"～\" + (month + 1) + \"/\" + 15;\r\n        }\r\n        if (this.state.comments[this.getintdate(year, month, day)] == null) {\r\n            this.state.comments[this.getintdate(year, month, day)] = {\r\n                comment: \"\",\r\n                wishday: \"\"\r\n            }\r\n        }\r\n        this.setState({\r\n            comment: this.state.comments[this.getintdate(year, month, day)].comment,\r\n            wishday: this.state.comments[this.getintdate(year, month, day)].wishday,\r\n            nowprintcommentday: this.getintdate(year, month, day),\r\n            complementdaysText: text\r\n        })\r\n    }\r\n    wishdayOnchange(e) {\r\n        this.setState({\r\n            wishday: e.target.value\r\n        })\r\n    }\r\n    commentOnchange(e) {\r\n        this.setState({\r\n            comment: e.target.value\r\n        });\r\n    }\r\n\r\n    //モーダル関連\r\n    openModal() {\r\n        this.setState({ modalIsOpen: true });\r\n    }\r\n    afterOpenModal() {\r\n        //モーダルオープン後処理\r\n    }\r\n    closeModal() {\r\n        this.setState({ modalIsOpen: false });\r\n    }\r\n    setShiftTime() {\r\n        if (this.state.startTime >= this.state.endTime) {\r\n            alert(\"不可能な時間です\")\r\n        } else {\r\n            this.closeModal();\r\n            const dayslist = this.state.month_days;\r\n            dayslist[this.state.clickdate] = { text: this.state.startTime + \"-\" + this.state.endTime }\r\n            this.setState({ month_days: dayslist });\r\n        }\r\n    }\r\n    startTimeChange(e) {\r\n        this.setState({\r\n            startTime: e.target.value\r\n        })\r\n    }\r\n    endTimeChange(e) {\r\n        this.setState({\r\n            endTime: e.target.value\r\n        })\r\n    }\r\n    //登録ボタン\r\n    addDataOnClick() {\r\n        this.state.comments[this.state.nowprintcommentday] = {\r\n            comment: this.state.comment,\r\n            wishday: this.state.wishday\r\n        }\r\n        const defshift = this.state.default_month_days;\r\n        const newshift = this.state.month_days;\r\n        const newshiftdata = [];\r\n        //追加されたシフト情報\r\n        for (let shiftday in newshift) {\r\n            if (defshift[shiftday] == null) {\r\n                newshiftdata[shiftday] = { text: newshift[shiftday].text }\r\n            }\r\n        }\r\n        //削除されたシフト情報\r\n        const deleteshiftdata = [];\r\n        for (let shiftday in defshift) {\r\n            if (newshift[shiftday].text === \"\") {\r\n                deleteshiftdata[shiftday] = { text: defshift[shiftday].text }\r\n            }\r\n        }\r\n        //更新されたシフト情報\r\n        const updateshiftdata = [];\r\n        for (let shiftday in newshift) {\r\n            if (defshift[shiftday] != null && newshift[shiftday].text !== \"\" && defshift[shiftday].text !== newshift[shiftday].text) {\r\n                updateshiftdata[shiftday] = { text: newshift[shiftday].text }\r\n            }\r\n        }\r\n        //add\r\n        if (newshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"add\") });\r\n            this.dbUpdater('/addshiftdata', newshiftdata);\r\n            //this.dbUpdater('/testaddshiftdata', newshiftdata);\r\n        }\r\n        //delete\r\n        if (deleteshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"delete\") });\r\n            this.dbUpdater('/deleteshiftdata', deleteshiftdata);\r\n            //this.dbUpdater('/testdeleteshiftdata', deleteshiftdata);\r\n        }\r\n        //update\r\n        if (updateshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"update\") });\r\n            this.dbUpdater('/updateshiftdata', updateshiftdata);\r\n            //this.dbUpdater('/testupdateshiftdata', updateshiftdata);\r\n        }\r\n        //コメント更新\r\n        //差分配列add＆update配列生成のちfetch\r\n        const addcommentdata = [];\r\n        for (const com in this.state.comments) {\r\n            if (this.state.default_comments[com] == null) {\r\n                addcommentdata.push({\r\n                    date: com,\r\n                    comment: this.state.comments[com].comment,\r\n                    wishday: this.state.comments[com].wishday\r\n                })\r\n            }\r\n        }\r\n        const updatecommentdata = [];\r\n        for (const com in this.state.default_comments) {\r\n            if ((this.state.comments[com].comment !== this.state.default_comments[com].comment) ||\r\n                (this.state.comments[com].wishday !== this.state.default_comments[com].wishday)) {\r\n                updatecommentdata.push({\r\n                    date: com,\r\n                    comment: this.state.comments[com].comment,\r\n                    wishday: this.state.comments[com].wishday\r\n                })\r\n            }\r\n        }\r\n        console.log(updatecommentdata);\r\n        fetch('/updatecommentdata', {\r\n            //fetch('/testupdatecommentdata', {\r\n            method: 'POST',\r\n            body: JSON.stringify(updatecommentdata),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            mode: 'cors'\r\n        }).then(res => res.json())\r\n        console.log(addcommentdata);\r\n        fetch('/addcommentdata', {\r\n            //fetch('/testaddcommentdata', {\r\n            method: 'POST',\r\n            body: JSON.stringify(addcommentdata),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            mode: 'cors'\r\n        }).then(res => res.json())\r\n            .then(str => alert(\"登録しました\"))\r\n        this.shiftupdateChecker(\"\");\r\n    }\r\n\r\n    //shiftDB更新用fetch\r\n    dbUpdater(url, data) {\r\n        let postdata = [];\r\n        for (let shift in data) {\r\n            postdata.push({ date: shift, text: data[shift].text })\r\n        }\r\n        fetch(url, {\r\n            method: 'POST',\r\n            body: JSON.stringify(postdata),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            mode: 'cors'\r\n        }).then(res => res.json())\r\n            .then(str => this.shiftupdateChecker(str))\r\n    }\r\n    shiftupdateChecker(str) {\r\n        if (str !== \"\") {\r\n            const list = [];\r\n            for (let data of this.state.isUpdateshift) {\r\n                if (data !== str) {\r\n                    list.push(data);\r\n                }\r\n            }\r\n            if (list.length <= 0) {\r\n                //シフトデータ取得\r\n                fetch('/shiftdata')\r\n                    //fetch('/testshiftdata')\r\n                    .then(res => res.json())\r\n                    .then(data => this.setdefaultshifts(data))\r\n            }\r\n            this.setState({ isUpdateshift: list });\r\n        } else {\r\n            if (this.state.isUpdateshift.length <= 0) {\r\n                //シフトデータ取得\r\n                fetch('/shiftdata')\r\n                    //fetch('/testshiftdata')\r\n                    .then(res => res.json())\r\n                    .then(data => this.setdefaultshifts(data))\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Home;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    input: {\r\n        margin: theme.spacing(1),\r\n    },\r\n}));\r\nconst customStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)'\r\n    }\r\n};\r\nModal.setAppElement('#root')\r\n\r\nclass Setting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userdata: [],//ユーザー情報\r\n            username: \"\",\r\n            worktime: \"\",\r\n            memberlist: [],//全ユーザー\r\n            administerlist: [],//管理者\r\n            nonadministerlist: [],//管理者外ユーザー\r\n            addministeroption: [],//管理者候補\r\n            ischangeworktime: false,\r\n            test: \"\",\r\n            memberModalopen: false,\r\n            administerModalopen: false,\r\n            isAddadminister: false\r\n        }\r\n\r\n        this.loadmemberlist = this.loadmemberlist.bind(this);\r\n        this.onChangeusername = this.onChangeusername.bind(this);\r\n        this.updateUsername = this.updateUsername.bind(this);\r\n        this.onChangeworktime = this.onChangeworktime.bind(this);\r\n        this.setworktime = this.setworktime.bind(this);\r\n        this.onClickunsubsribe = this.onClickunsubsribe.bind(this);\r\n        this.pushtoHome = this.pushtoHome.bind(this);\r\n\r\n        this.openmemberModal = this.openmemberModal.bind(this);\r\n        this.closememberModal = this.closememberModal.bind(this);\r\n        this.closeadministerModal = this.closeadministerModal.bind(this);\r\n        this.onChangeaddministeroption = this.onChangeaddministeroption.bind(this);\r\n        this.onClickadminister = this.onClickadminister.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //ユーザーデータ取得\r\n        //fetch('/testuserdata')\r\n        fetch('/userdata')\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    userdata: data,\r\n                    username: data.username,\r\n                    worktime: data.worktime\r\n                });\r\n                if (data.administer) {\r\n                    //menbarlist\r\n                    this.loadmemberlist();\r\n                }\r\n            })\r\n    }\r\n    loadmemberlist() {\r\n        //fetch('/testmemberlist')\r\n        fetch('/memberlist')\r\n            .then(res => res.json())\r\n            .then(list => {\r\n                this.setState({ memberlist: list });\r\n                const adlist = [];\r\n                const nonadlist = [];\r\n                for (let user of list) {\r\n                    if (user.administer) {\r\n                        adlist.push(user);\r\n                    } else {\r\n                        nonadlist.push(user);\r\n                    }\r\n                }\r\n                this.setState({\r\n                    administerlist: adlist,\r\n                    nonadministerlist: nonadlist,\r\n                    addministeroption: nonadlist[0]\r\n                });\r\n            }\r\n            );\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>設定</h1>\r\n                <img src={this.state.userdata.picture}></img>\r\n                <p>{this.state.userdata.displayName}</p>\r\n                <div>\r\n                    ユーザー名\r\n                    {/* \r\n                <input type=\"textarea\" name=\"name\" value={this.state.username} onChange={this.onChangeusername}></input>\r\n                    */}\r\n                    <Input\r\n                        id=\"username\"\r\n                        value={this.state.username}\r\n                        onChange={this.onChangeusername}\r\n                        className={useStyles.input}\r\n                        inputProps={{\r\n                            'aria-label': 'username',\r\n                        }}\r\n                    />\r\n                    <button onClick={this.updateUsername}>更新</button>\r\n                </div>\r\n                <div>\r\n                    勤務区分:\r\n                {this.state.ischangeworktime ? (\r\n                        <span>\r\n                            <input type=\"radio\" name=\"worktime\" value=\"早\" checked={this.state.worktime === '早'}\r\n                                onChange={() => this.setState({ worktime: '早' })} />早番\r\n                            <input type=\"radio\" name=\"worktime\" value=\"遅\" checked={this.state.worktime === '遅'}\r\n                                onChange={() => this.setState({ worktime: '遅' })} />遅番\r\n                            <button onClick={this.setworktime}>更新</button>\r\n                        </span>\r\n                    ) : (\r\n                            <span>\r\n                                {this.state.userdata.worktime}番\r\n                                <button onClick={this.onChangeworktime}>変更</button>\r\n                            </span>\r\n                        )}\r\n                </div>\r\n                <button onClick={this.onClickunsubsribe}>退会</button>\r\n                <div style={{ display: this.state.userdata.administer ? '' : 'none' }}>\r\n                    管理者権限<br></br>\r\n                    <button>希望一覧</button>\r\n                    <Link to={{ pathname: '/Wishlist', query: { pass: \"administer\" } }}>hope</Link>\r\n                    <button onClick={this.openmemberModal}>登録者一覧</button>\r\n                    <button onClick={(e) => this.setState({ administerModalopen: true })}>管理者一覧</button>\r\n                </div>\r\n                <Modal\r\n                    isOpen={this.state.memberModalopen}\r\n                    onRequestClose={this.closememberModal}\r\n                    style={customStyles}\r\n                    contentLabel=\"Register Modal\"\r\n                >\r\n                    <h2>登録者一覧</h2>\r\n                    {this.state.memberlist.map((member) =>\r\n                        <div key={member.userid}>\r\n                            {member.name}\r\n                            <span style={{ display: (member.userid !== this.state.userdata.userId) ? '' : 'none' }}>\r\n                                <button value={member.userid} onClick={(e) => this.onClickdeletemember(member)}>登録削除</button>\r\n                            </span>\r\n                        </div>)}\r\n                    <button onClick={this.closememberModal}>閉じる</button>\r\n                </Modal>\r\n                <Modal\r\n                    isOpen={this.state.administerModalopen}\r\n                    onRequestClose={this.closeadministerModal}\r\n                    style={customStyles}\r\n                    contentLabel=\"Administer Modal\"\r\n                >\r\n                    <h2>管理者一覧</h2>\r\n                    {this.state.administerlist.map((member) =>\r\n                        <div key={member.userid}>\r\n                            {member.name}\r\n                            <span style={{ display: (member.userid !== this.state.userdata.userId) ? '' : 'none' }}>\r\n                                <button onClick={(e) => this.onClickdeleteadminister(member)}>解除</button>\r\n                            </span>\r\n                        </div>)}\r\n                    {(this.state.isAddadminister && this.state.nonadministerlist.length > 0) ? (\r\n                        <span>\r\n                            <select onChange={this.onChangeaddministeroption} value={this.state.addministeroption.name}>\r\n                                {this.state.nonadministerlist.map((member) =>\r\n                                    <option>{member.name}</option>\r\n                                )}\r\n                            </select>\r\n                            <button onClick={(e) => this.onClickaddAdminister()}>追加</button>\r\n                        </span>\r\n                    ) : (\r\n                            <button onClick={(e) => this.onClickadminister()}>追加</button>\r\n                        )}\r\n\r\n                    <button onClick={this.closeadministerModal}>閉じる</button>\r\n                </Modal>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    //ユーザー名変更\r\n    onChangeusername(e) {\r\n        this.setState({\r\n            username: e.target.value\r\n        })\r\n    }\r\n    //ユーザー名変更処理\r\n    updateUsername() {\r\n        if (this.state.username !== this.state.userdata.username) {\r\n            //更新fetch\r\n            //fetch('/testupdateusername', {\r\n            fetch('/updateusername', {\r\n                method: 'POST',\r\n                body: JSON.stringify([this.state.username]),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n                .then(str => {\r\n                    alert(\"登録しました\");\r\n                    this.state.userdata.username = this.state.username;\r\n                })\r\n        }\r\n    }\r\n    //勤務区分変更判定\r\n    onChangeworktime() {\r\n        this.setState({\r\n            ischangeworktime: true\r\n        })\r\n    }\r\n    //勤務区分更新\r\n    setworktime() {\r\n        if (this.state.userdata.worktime !== this.state.worktime) {\r\n            //更新fetch\r\n            //fetch('/testupdateworktime', {\r\n            fetch('/updateworktime', {\r\n                method: 'POST',\r\n                body: JSON.stringify([this.state.worktime]),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n            this.state.userdata.worktime = this.state.worktime\r\n        }\r\n        this.setState({\r\n            ischangeworktime: false\r\n        })\r\n    }\r\n    //退会ボタン\r\n    onClickunsubsribe() {\r\n        //退会確認\r\n        if (window.confirm(\"退会しますか？\\n全ユーザーデータが削除されます\")) {\r\n            //fetch('/testdeleteuser', {\r\n            fetch('/deleteuser', {\r\n                method: 'POST',\r\n                //body: \"sub\",\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n            fetch('/logout')\r\n                .then(res => res.json())\r\n            this.pushtoHome();\r\n        }\r\n\r\n    }\r\n    pushtoHome = () => {\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    openmemberModal() {\r\n        this.setState({ memberModalopen: true });\r\n    }\r\n    closememberModal() {\r\n        this.setState({ memberModalopen: false });\r\n    }\r\n    //登録者削除\r\n    onClickdeletemember(member) {\r\n        if (window.confirm(member.name + \"を本当に削除しますか？\\n該当ユーザーのシフト情報も削除されます\")) {\r\n            //削除処理\r\n            //fetch('/testdeletemember', {\r\n            fetch('/deletemember', {\r\n                method: 'POST',\r\n                body: JSON.stringify([member.userid]),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n                .then(res => {\r\n                    this.closememberModal();\r\n                    //メンバー更新\r\n                    this.loadmemberlist();\r\n                })\r\n        } else {\r\n\r\n        }\r\n    }\r\n    //管理者権限剥奪\r\n    onClickdeleteadminister(member) {\r\n        if (window.confirm(member.name + \"の管理者権限を剥奪しますか？\")) {\r\n            //解除処理\r\n            //fetch('/testdeleteadminister', {\r\n            fetch('/deleteadminister', {\r\n                method: 'POST',\r\n                body: JSON.stringify([member.userid]),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n                .then(res => {\r\n                    this.closeadministerModal();\r\n                    //メンバー更新\r\n                    this.loadmemberlist();\r\n                })\r\n        } else {\r\n\r\n        }\r\n    }\r\n    //管理者候補変更\r\n    onChangeaddministeroption(e) {\r\n        for (let member of this.state.nonadministerlist) {\r\n            if (member.name === e.target.value) {\r\n                this.setState({\r\n                    addministeroption: member\r\n                })\r\n                break;\r\n            }\r\n        }\r\n\r\n    }\r\n    onClickadminister() {\r\n        this.setState({\r\n            isAddadminister: true\r\n        })\r\n    }\r\n    //管理者追加\r\n    onClickaddAdminister() {\r\n        const member = this.state.addministeroption;\r\n        if (window.confirm(member.name + \"に管理者権限を授与しますか？\")) {\r\n            //管理者登録処理\r\n            //fetch('/testaddadminister', {\r\n            fetch('/addadminister', {\r\n                method: 'POST',\r\n                body: JSON.stringify([member.userid]),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                mode: 'cors'\r\n            }).then(res => res.json())\r\n                .then(res => {\r\n                    this.closeadministerModal();\r\n                    //メンバー更新\r\n                    this.loadmemberlist();\r\n                })\r\n        }\r\n    }\r\n\r\n    closeadministerModal() {\r\n        this.setState({\r\n            administerModalopen: false,\r\n            isAddadminister: false\r\n        });\r\n    }\r\n}\r\n\r\nexport default Setting;","import React, { Component } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(3),\r\n        overflowX: 'auto',\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n}));\r\n\r\nclass Wishlist extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            query: this.props.location.query,\r\n            accessable: false,//アクセス判定\r\n            memberlist: [],//登録メンバー\r\n            allshiftdata: [],//全シフト情報\r\n            printlist: [],//表示するリスト\r\n            deadlineearly: 10,\r\n            deallinelate: 24,\r\n            startdate: \"\",\r\n            printdays: []//表示する期間\r\n        }\r\n\r\n        this.setprintDays = this.setprintDays.bind(this);\r\n        this.sortmembershift = this.sortmembershift.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //アクセス判定\r\n        if (this.props.location.query !== undefined) {\r\n            if (this.props.location.query.pass === \"administer\") {\r\n                this.setState({\r\n                    accessable: true\r\n                })\r\n                this.setprintDays();\r\n                //全ユーザー取得\r\n                //fetch('/testmemberlist')\r\n                fetch('/memberlist')\r\n                    .then(res => res.json())\r\n                    .then(list => {\r\n                        this.setState({ memberlist: list })\r\n                        //全シフト情報取得\r\n                        //fetch('/testallshiftdata')\r\n                        fetch('/allshiftdata')\r\n                            .then(res => res.json())\r\n                            .then(data => {\r\n                                this.setState({ allshiftdata: data });\r\n                                this.sortmembershift(list, data);\r\n                            })\r\n                    })\r\n\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const classes = useStyles;\r\n        return (\r\n            <div>\r\n                {this.state.accessable ? (\r\n                    <div>\r\n                        <h1>Wishlist</h1>\r\n                        アクセス可能\r\n                        <Paper className={classes.root}\r\n                            style={{\r\n                                overflowX: 'scroll'\r\n                            }}>\r\n                            <Table className={classes.table}\r\n                            >\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <TableCell>name</TableCell>\r\n                                        {this.state.printdays.map((day) =>\r\n                                            <TableCell key={day}>{day}</TableCell>\r\n                                        )}\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {this.state.printlist.map(member =>\r\n                                        <TableRow key={member.name}>\r\n                                            <TableCell component=\"th\" scope=\"row\" key={member.name}>{member.name}</TableCell>\r\n                                            {member.shift.map(shift =>\r\n                                                <TableCell component=\"th\" scope=\"row\">{shift}</TableCell>)}\r\n                                        </TableRow>\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </Paper>\r\n                    </div>\r\n                ) : (\r\n                        <div>アクセスできません</div>\r\n                    )}\r\n            </div>\r\n\r\n        );\r\n    }\r\n    //表示期間計算\r\n    setprintDays() {\r\n        //表示する期間開始日を計算\r\n        const date = new Date();\r\n        const year = date.getFullYear();\r\n        const month = date.getMonth();\r\n        const day = date.getDate();\r\n        let startdate = \"\";\r\n        if (day < this.state.deadlineearly) {\r\n            startdate = new Date(year, month, 1);\r\n        } else if (day < this.state.deallinelate) {\r\n            startdate = new Date(year, month, 16);\r\n        } else if (day >= this.state.deallinelate) {\r\n            if (month === 11) {\r\n                startdate = new Date(year + 1, month + 1, 1);\r\n            } else {\r\n                startdate = new Date(year, month + 1, 1);\r\n            }\r\n        }\r\n        //date確認用\r\n        //startdate = new Date(2019, 7, 16);\r\n\r\n        //表示する期間配列生成\r\n        const days = [];\r\n        if (startdate.getDate() === 1) {\r\n            for (let i = 0; i < 15; i++) {\r\n                days.push((startdate.getMonth() + 1) + \"/\" + (startdate.getDate() + i));\r\n            }\r\n        } else if (startdate.getDate() === 16) {\r\n            const findate = new Date(startdate.getFullYear(), startdate.getMonth() + 1, 0);\r\n            for (let i = 0; i < findate.getDate() - startdate.getDate() + 1; i++) {\r\n                days.push((startdate.getMonth() + 1) + \"/\" + (startdate.getDate() + i));\r\n            }\r\n        }\r\n        this.setState({\r\n            startdate: startdate,\r\n            printdays: days\r\n        });\r\n    }\r\n    //\r\n    sortmembershift(members, shifts) {\r\n        const printdate = this.state.startdate;\r\n        let printfinaldate = \"\";\r\n        let shiftlist = [];\r\n        if (printdate.getDate() === 1) {\r\n            printfinaldate = new Date(printdate.getFullYear(), printdate.getMonth(), 15)\r\n            shiftlist = Array(15);\r\n        } else if (printdate.getDate() === 16) {\r\n            printfinaldate = new Date(printdate.getFullYear(), printdate.getMonth(), 0);\r\n            shiftlist = Array(printfinaldate.getDate() - 15);\r\n        }\r\n        const membertoshift = [];\r\n        for (const member of members) {\r\n            const myshift = shiftlist.slice();\r\n            myshift.fill(\"/\");\r\n            for (const shift of shifts) {\r\n                if (shift.userid === member.userid) {\r\n                    const sd = String(shift.date);\r\n                    const shiftyear = parseInt(sd.slice(0, 4));\r\n                    const shiftmonth = parseInt(sd.slice(4, 6));\r\n                    const shiftday = parseInt(sd.slice(6));\r\n                    if ((shiftyear === printdate.getFullYear()) &&\r\n                        (shiftmonth === (printdate.getMonth() + 1)) &&\r\n                        (shiftday >= printdate.getDate()) &&\r\n                        (shiftday <= printfinaldate.getDate())) {\r\n                        //表示する情報\r\n                        myshift[shiftday - printdate.getDate()] = shift.detail;\r\n                    }\r\n                }\r\n            }\r\n            membertoshift.push({\r\n                name: member.name,\r\n                shift: myshift\r\n            })\r\n        }\r\n        //\r\n        this.setState({\r\n            printlist: membertoshift\r\n        });\r\n    }\r\n}\r\n\r\nexport default Wishlist;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Calendar from 'react-calendar';\r\nimport Modal from 'react-modal';\r\n\r\nconst customStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)'\r\n    }\r\n};\r\nModal.setAppElement('#root')\r\n\r\nclass Homelocal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userdata: [],//ユーザー情報\r\n            date: new Date(),//today\r\n            receptionDate: new Date(),//受付中\r\n            stamp: \"x\",//シフトに記入する文字\r\n            stamptime: \"\",//時間希望\r\n            deadline: \"\",//締め切り\r\n            default_month_days: [],//defaultのシフト情報\r\n            month_days: [],//更新されるシフト情報\r\n            shifttimes: [\"09:00\", \"09:30\", \"10:00\", \"10:30\", \"11:00\", \"11:30\", \"12:00\", \"12:30\",\r\n                \"13:00\", \"13:30\", \"14:00\", \"14:30\", \"15:00\", \"15:30\",\r\n                \"16:00\", \"16:30\", \"17:00\", \"17:30\", \"18:00\", \"18:30\",\r\n                \"19:00\", \"19:30\", \"20:00\", \"20:30\", \"21:00\", \"21:30\",\r\n                \"22:00\", \"22:30\", \"23:00\", \"23:30\", \"23:45\"],//選択可能時間\r\n            startTime: \"09:00\",\r\n            endTime: \"09:00\",\r\n            comment: \"\",//希望コメント\r\n            modalIsOpen: false,//モーダル判定\r\n            isUpdateshift: []//シフト更新\r\n        }\r\n        this.setdefaultshifts = this.setdefaultshifts.bind(this);\r\n        this.getDateReception = this.getDateReception.bind(this);\r\n        this.commentOnchange = this.commentOnchange.bind(this);\r\n        this.openModal = this.openModal.bind(this);\r\n        this.afterOpenModal = this.afterOpenModal.bind(this);\r\n        this.closeModal = this.closeModal.bind(this);\r\n        this.setShiftTime = this.setShiftTime.bind(this);\r\n        this.startTimeChange = this.startTimeChange.bind(this);\r\n        this.endTimeChange = this.endTimeChange.bind(this);\r\n        this.addDataOnClick = this.addDataOnClick.bind(this);\r\n        this.shiftupdateChecker = this.shiftupdateChecker.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        this.getDateReception();\r\n        //ユーザーデータ取得\r\n        fetch('/testuserdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setState({ userdata: data }))\r\n        //シフトデータ取得\r\n        fetch('/testshiftdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setdefaultshifts(data))\r\n        //コメントデータ取得\r\n        fetch('/testgetcommentdata')\r\n            .then(res => res.json())\r\n            .then(data => this.setState({ comment: data[0].text }))\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>シフト希望</h1>\r\n                ようこそ{this.state.userdata.username}さん\r\n                <Link to=\"/Setting\">設定</Link>\r\n                <a href=\"/logout\">logout</a>\r\n                <h2>{this.state.receptionDate.getFullYear()} {this.state.receptionDate.getMonth() + 1}月\r\n                {this.state.receptionDate.getDate()}日～受付中</h2>\r\n\r\n                <div id=\"dateText\">{this.state.deadline}</div>\r\n                <button id=\"batu\" onClick={this.onClickstamp.bind(this, \"x\")}>×</button>\r\n                <button id=\"sankaku\" onClick={this.onClickstamp.bind(this, \"△\")}>△</button>\r\n                <button id=\"timeset\" onClick={this.onClickstamp.bind(this, \"time\")}>Time</button>\r\n                <div id=\"calendar\"></div>\r\n                <Calendar\r\n                    locale=\"ja-JP\"\r\n                    calendarType=\"US\"\r\n                    value={this.state.receptionDate}\r\n                    tileContent={this.getTileContent.bind(this)}\r\n                    onChange={(value) => this.dayClick(value)}\r\n                />\r\n\r\n                <div>\r\n                    補足希望\r\n                    <input type=\"textarea\" name=\"comment\" value={this.state.comment} onChange={this.commentOnchange}></input>\r\n                    <button onClick={this.addDataOnClick}>登録</button>\r\n                </div>\r\n\r\n                <Modal\r\n                    isOpen={this.state.modalIsOpen}\r\n                    onAfterOpen={this.afterOpenModal}\r\n                    onRequestClose={this.closeModal}\r\n                    style={customStyles}\r\n                    contentLabel=\"Example Modal\"\r\n                >\r\n                    <h2>出勤可能時間を選択</h2>\r\n                    <div>\r\n                        <select onChange={this.startTimeChange} value={this.state.startTime}>\r\n                            {this.state.shifttimes.map(time =>\r\n                                <option key={time}>{time}</option>\r\n                            )}\r\n                        </select>～\r\n                    <select onChange={this.endTimeChange} value={this.state.endTime}>\r\n                            {this.state.shifttimes.map(time =>\r\n                                <option key={time}>{time}</option>\r\n                            )}\r\n                        </select>\r\n                    </div>\r\n                    <button onClick={this.closeModal}>閉じる</button>\r\n                    <button onClick={this.setShiftTime}>決定</button>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n    //json変換\r\n    setdefaultshifts(data) {\r\n        const deflist = [];\r\n        const list = [];\r\n        for (let shift of data) {\r\n            list[shift.date] = { text: shift.detail }\r\n            deflist[shift.date] = { text: shift.detail }\r\n        }\r\n        this.setState({\r\n            default_month_days: deflist,\r\n            month_days: list\r\n        })\r\n    }\r\n    getFormatDate(date) {\r\n        return `${date.getFullYear()}${('0' + (date.getMonth() + 1)).slice(-2)}${('0' + date.getDate()).slice(-2)}`;\r\n    }\r\n\r\n    //受付中日にち\r\n    getDateReception() {\r\n        let year = this.state.date.getFullYear();\r\n        let month = this.state.date.getMonth() + 1;\r\n        const day = this.state.date.getDate();\r\n        let deadline = \"\";\r\n        let setday = \"\";\r\n        if (day <= 10) {\r\n            //締め切り\r\n            const finaldate = new Date(year, month, 0);\r\n            deadline = month + \"/10まで(\" + month + \"/16～\" + month + \"/\" + finaldate.getDate() + \")\"\r\n            //今月16～末日まで\r\n            setday = year + \"/\" + month + \"/16\";\r\n        } else if (day > 24) {\r\n            //年越し処理\r\n            if (month === 12) {\r\n                year++;\r\n                month = 0;\r\n            }\r\n            //締め切り\r\n            const finaldate = new Date(year, month, 0);\r\n            deadline = (month + 1) + \"/10まで(\" + (month + 1) + \"/16～\" + (month + 1) + \"/\" + finaldate.getDate() + \")\"\r\n            //来月16～末日\r\n            setday = year + \"/\" + (month + 1) + \"/16\";\r\n        } else {\r\n            //年越し処理\r\n            if (month === 12) {\r\n                year++;\r\n                month = 0;\r\n            }\r\n            //締め切り\r\n            deadline = month + \"/24まで(\" + (month + 1) + \"/1～\" + (month + 1) + \"/15)\"\r\n            //来月1～15まで\r\n            setday = year + \"/\" + (month + 1) + \"/1\";\r\n        }\r\n        this.setState({\r\n            deadline: deadline,\r\n            receptionDate: new Date(setday)\r\n        })\r\n    }\r\n    getTileContent({ date, view }) {\r\n        // 月表示のときのみ\r\n        if (view !== 'month') {\r\n            return null;\r\n        }\r\n        const day = this.getFormatDate(date);\r\n        return (\r\n            <p>\r\n                {(this.state.month_days[day] && this.state.month_days[day].text) ?\r\n                    this.state.month_days[day].text : '  '\r\n                }\r\n            </p>\r\n        );\r\n    }\r\n\r\n    //スタンプ変換\r\n    onClickstamp(value) {\r\n        this.setState({\r\n            stamp: value\r\n        })\r\n    }\r\n    //日付クリック\r\n    dayClick(value) {\r\n        //受付中か\r\n        if (this.state.receptionDate <= value) {\r\n            const dayslist = this.state.month_days;\r\n            const clickday = value.getFullYear() + (\"0\" + (value.getMonth() + 1)).slice(-2) + (\"0\" + value.getDate()).slice(-2);\r\n            this.setState({ clickdate: clickday })\r\n            //空or重複判定\r\n            if (null == dayslist[clickday] || \"\" === dayslist[clickday].text) {\r\n                //stampが記号か日付で分岐\r\n                if (this.state.stamp === \"time\") {\r\n                    this.openModal();\r\n\r\n                } else {\r\n                    dayslist[clickday] = { text: this.state.stamp }\r\n                    this.setState({ month_days: dayslist })\r\n                }\r\n                //stamp一致クリック\r\n            } else if (this.state.stamp === dayslist[clickday].text) {\r\n                dayslist[clickday] = { text: \"\" }\r\n                this.setState({ month_days: dayslist })\r\n            } else if (this.state.stamp !== dayslist[clickday].text) {\r\n                //stampが記号か日付で分岐\r\n                if (this.state.stamp === \"time\") {\r\n                    //this.openModal();\r\n                    dayslist[clickday] = { text: \"\" }\r\n                } else {\r\n                    dayslist[clickday] = { text: this.state.stamp }\r\n                    this.setState({ month_days: dayslist })\r\n                }\r\n            }\r\n        }\r\n    }\r\n    commentOnchange(e) {\r\n        this.setState({\r\n            comment: e.target.value\r\n        });\r\n    }\r\n\r\n    //モーダル関連\r\n    openModal() {\r\n        this.setState({ modalIsOpen: true });\r\n    }\r\n    afterOpenModal() {\r\n        //モーダルオープン後処理\r\n    }\r\n    closeModal() {\r\n        this.setState({ modalIsOpen: false });\r\n    }\r\n    setShiftTime() {\r\n        if (this.state.startTime >= this.state.endTime) {\r\n            alert(\"不可能な時間です\")\r\n        } else {\r\n            this.closeModal();\r\n            const dayslist = this.state.month_days;\r\n            dayslist[this.state.clickdate] = { text: this.state.startTime + \"-\" + this.state.endTime }\r\n            this.setState({ month_days: dayslist });\r\n        }\r\n    }\r\n    startTimeChange(e) {\r\n        this.setState({\r\n            startTime: e.target.value\r\n        })\r\n    }\r\n    endTimeChange(e) {\r\n        this.setState({\r\n            endTime: e.target.value\r\n        })\r\n    }\r\n\r\n\r\n    //登録ボタン\r\n    addDataOnClick() {\r\n        const defshift = this.state.default_month_days;\r\n        const newshift = this.state.month_days;\r\n        const newshiftdata = [];\r\n        //追加されたシフト情報\r\n        for (let shiftday in newshift) {\r\n            if (defshift[shiftday] == null) {\r\n                newshiftdata[shiftday] = { text: newshift[shiftday].text }\r\n            }\r\n        }\r\n        //削除されたシフト情報\r\n        const deleteshiftdata = [];\r\n        for (let shiftday in defshift) {\r\n            if (newshift[shiftday].text === \"\") {\r\n                deleteshiftdata[shiftday] = { text: defshift[shiftday].text }\r\n            }\r\n        }\r\n        //更新されたシフト情報\r\n        const updateshiftdata = [];\r\n        for (let shiftday in newshift) {\r\n            if (defshift[shiftday] != null && newshift[shiftday].text !== \"\" && defshift[shiftday].text !== newshift[shiftday].text) {\r\n                updateshiftdata[shiftday] = { text: newshift[shiftday].text }\r\n            }\r\n        }\r\n        //add\r\n        if (newshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"add\") });\r\n            this.dbUpdater('/testaddshiftdata', newshiftdata);\r\n        }\r\n        //delete\r\n        if (deleteshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"delete\") });\r\n            this.dbUpdater('/testdeleteshiftdata', deleteshiftdata);\r\n        }\r\n        //update\r\n        if (updateshiftdata.length > 0) {\r\n            this.setState({ isUpdateshift: this.state.isUpdateshift.concat(\"update\") });\r\n            this.dbUpdater('/testupdateshiftdata', updateshiftdata);\r\n        }\r\n        //コメント更新\r\n        fetch('/testupdatecommentdata', {\r\n            method: 'POST',\r\n            body: JSON.stringify([this.state.comment]),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            mode: 'cors'\r\n        }).then(res => res.json())\r\n            .then(str => alert(\"登録しました\"))\r\n        this.shiftupdateChecker(\"\");\r\n    }\r\n\r\n    //shiftDB更新用fetch\r\n    dbUpdater(url, data) {\r\n        let postdata = [];\r\n        for (let shift in data) {\r\n            postdata.push({ date: shift, text: data[shift].text })\r\n        }\r\n        fetch(url, {\r\n            method: 'POST',\r\n            body: JSON.stringify(postdata),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            mode: 'cors'\r\n        }).then(res => res.json())\r\n            .then(str => this.shiftupdateChecker(str))\r\n    }\r\n    shiftupdateChecker(str) {\r\n        if (str !== \"\") {\r\n            const list = [];\r\n            for (let data of this.state.isUpdateshift) {\r\n                if (data !== str) {\r\n                    list.push(data);\r\n                }\r\n            }\r\n            if (list.length <= 0) {\r\n                //シフトデータ取得\r\n                fetch('/testshiftdata')\r\n                    .then(res => res.json())\r\n                    .then(data => this.setdefaultshifts(data))\r\n            }\r\n            this.setState({ isUpdateshift: list });\r\n        } else {\r\n            if (this.state.isUpdateshift.length <= 0) {\r\n                //シフトデータ取得\r\n                fetch('/testshiftdata')\r\n                    .then(res => res.json())\r\n                    .then(data => this.setdefaultshifts(data))\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default Homelocal;","import React, { Component } from 'react';\nimport { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\nimport Home from './Home';\nimport Setting from './Setting';\nimport Wishlist from './Wishlist';\n//test import\nimport Homelocal from './Homelocal';\n\nconst App = () => (\n  <BrowserRouter>\n    <div>\n      <Route exact path='/' component={Top} />\n      <Route path='/Home' component={Home} />\n      <Route path='/Setting' component={Setting} />\n      <Route path='/Wishlist' component={Wishlist} />\n\n      <Route path='/Testpage' component={Home} />\n      <Route path='/Homelocal' component={Homelocal} />\n    </div>\n  </BrowserRouter>\n)\n\nclass Top extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: false\n    }\n  }\n  setRedirect = () => {\n    this.setState({\n      redirect: true\n    })\n  }\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to='/Home' />\n    }\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        {this.renderRedirect()}\n        <h1>ログイン</h1>\n        <a href=\"/auth\">ログイン２</a>\n\n        <div>\n          <h2>tester</h2>\n          ------------------<br></br>\n          <a href=\"/callback\">\n            callback\n        </a>\n          <br></br>\n          <a href=\"/db\" >\n            DBChecker\n        </a>\n          <br></br>\n          <Link to=\"/Home\">HomeChecker in local</Link>\n          <br></br>\n          -------------------------\n    </div>\n        <button onClick={this.setRedirect}>redirect</button>\n      </div>\n    );\n  }\n\n\n  getTest = () => {\n    console.log(\"test\");\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}