(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(t,e,a){t.exports=a(75)},46:function(t,e,a){},75:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(25),o=a.n(s),r=(a(46),a(9)),l=a(10),c=a(13),h=a(11),d=a(14),u=a(12),m=a(15),f=a(1),p=a(21),b=a.n(p),v=a(16),g=a.n(v),y={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};g.a.setAppElement("#root");var k=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).state={userdata:[],date:new Date,receptionDate:new Date,stamp:"x",stamptime:"",deadline:"",default_month_days:[],month_days:[],shifttimes:["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","23:45"],startTime:"09:00",endTime:"09:00",comment:"",modalIsOpen:!1,isUpdateshift:[]},a.setdefaultshifts=a.setdefaultshifts.bind(Object(f.a)(a)),a.getDateReception=a.getDateReception.bind(Object(f.a)(a)),a.commentOnchange=a.commentOnchange.bind(Object(f.a)(a)),a.openModal=a.openModal.bind(Object(f.a)(a)),a.afterOpenModal=a.afterOpenModal.bind(Object(f.a)(a)),a.closeModal=a.closeModal.bind(Object(f.a)(a)),a.setShiftTime=a.setShiftTime.bind(Object(f.a)(a)),a.startTimeChange=a.startTimeChange.bind(Object(f.a)(a)),a.endTimeChange=a.endTimeChange.bind(Object(f.a)(a)),a.addDataOnClick=a.addDataOnClick.bind(Object(f.a)(a)),a.shiftupdateChecker=a.shiftupdateChecker.bind(Object(f.a)(a)),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.getDateReception(),fetch("/userdata").then(function(t){return t.json()}).then(function(e){return t.setState({userdata:e})}),fetch("/shiftdata").then(function(t){return t.json()}).then(function(e){return t.setdefaultshifts(e)}),fetch("/getcommentdata").then(function(t){return t.json()}).then(function(e){return t.setState({comment:e[0].text})})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement("h1",null,"\u30b7\u30d5\u30c8\u5e0c\u671b"),"\u3088\u3046\u3053\u305d",this.state.userdata.username,"\u3055\u3093",i.a.createElement(u.b,{to:"/Setting"},"\u8a2d\u5b9a"),i.a.createElement("a",{href:"/logout"},"logout"),i.a.createElement("h2",null,this.state.receptionDate.getFullYear()," ",this.state.receptionDate.getMonth()+1,"\u6708",this.state.receptionDate.getDate(),"\u65e5\uff5e\u53d7\u4ed8\u4e2d"),i.a.createElement("div",{id:"dateText"},this.state.deadline),i.a.createElement("button",{id:"batu",onClick:this.onClickstamp.bind(this,"x")},"\xd7"),i.a.createElement("button",{id:"sankaku",onClick:this.onClickstamp.bind(this,"\u25b3")},"\u25b3"),i.a.createElement("button",{id:"timeset",onClick:this.onClickstamp.bind(this,"time")},"Time"),i.a.createElement("div",{id:"calendar"}),i.a.createElement(b.a,{locale:"ja-JP",calendarType:"US",value:this.state.receptionDate,tileContent:this.getTileContent.bind(this),onChange:function(e){return t.dayClick(e)}}),i.a.createElement("div",null,"\u88dc\u8db3\u5e0c\u671b",i.a.createElement("input",{type:"textarea",name:"comment",value:this.state.comment,onChange:this.commentOnchange}),i.a.createElement("button",{onClick:this.addDataOnClick},"\u767b\u9332")),i.a.createElement(g.a,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,style:y,contentLabel:"Example Modal"},i.a.createElement("h2",null,"\u51fa\u52e4\u53ef\u80fd\u6642\u9593\u3092\u9078\u629e"),i.a.createElement("div",null,i.a.createElement("select",{onChange:this.startTimeChange,value:this.state.startTime},this.state.shifttimes.map(function(t){return i.a.createElement("option",{key:t},t)})),"\uff5e",i.a.createElement("select",{onChange:this.endTimeChange,value:this.state.endTime},this.state.shifttimes.map(function(t){return i.a.createElement("option",{key:t},t)}))),i.a.createElement("button",{onClick:this.closeModal},"\u9589\u3058\u308b"),i.a.createElement("button",{onClick:this.setShiftTime},"\u6c7a\u5b9a")))}},{key:"setdefaultshifts",value:function(t){var e=[],a=[],n=!0,i=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var l=o.value;a[l.date]={text:l.detail},e[l.date]={text:l.detail}}}catch(c){i=!0,s=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}this.setState({default_month_days:e,month_days:a})}},{key:"getFormatDate",value:function(t){return"".concat(t.getFullYear()).concat(("0"+(t.getMonth()+1)).slice(-2)).concat(("0"+t.getDate()).slice(-2))}},{key:"getDateReception",value:function(){var t=this.state.date.getFullYear(),e=this.state.date.getMonth()+1,a=this.state.date.getDate(),n="",i="";if(a<=10)n=e+"/10\u307e\u3067("+e+"/16\uff5e"+e+"/"+new Date(t,e,0).getDate()+")",i=t+"/"+e+"/16";else if(a>24){12==e&&(t++,e=0),n=e+1+"/10\u307e\u3067("+(e+1)+"/16\uff5e"+(e+1)+"/"+new Date(t,e,0).getDate()+")",i=t+"/"+(e+1)+"/16"}else 12==e&&(t++,e=0),n=e+"/24\u307e\u3067("+(e+1)+"/1\uff5e"+(e+1)+"/15)",i=t+"/"+(e+1)+"/1";this.setState({deadline:n,receptionDate:new Date(i)})}},{key:"getTileContent",value:function(t){var e=t.date;if("month"!==t.view)return null;var a=this.getFormatDate(e);return i.a.createElement("p",null,this.state.month_days[a]&&this.state.month_days[a].text?this.state.month_days[a].text:"  ")}},{key:"onClickstamp",value:function(t){this.setState({stamp:t})}},{key:"dayClick",value:function(t){if(this.state.receptionDate<=t){var e=this.state.month_days,a=t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2);this.setState({clickdate:a}),null==e[a]||""==e[a].text?"time"==this.state.stamp?this.openModal():(e[a]={text:this.state.stamp},this.setState({month_days:e})):this.state.stamp==e[a].text?(e[a]={text:""},this.setState({month_days:e})):this.state.stamp!=e[a].text&&("time"==this.state.stamp?e[a]={text:""}:(e[a]={text:this.state.stamp},this.setState({month_days:e})))}}},{key:"commentOnchange",value:function(t){this.setState({comment:t.target.value})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"setShiftTime",value:function(){if(this.state.startTime>=this.state.endTime)alert("\u4e0d\u53ef\u80fd\u306a\u6642\u9593\u3067\u3059");else{this.closeModal();var t=this.state.month_days;t[this.state.clickdate]={text:this.state.startTime+"-"+this.state.endTime},this.setState({month_days:t})}}},{key:"startTimeChange",value:function(t){this.setState({startTime:t.target.value})}},{key:"endTimeChange",value:function(t){this.setState({endTime:t.target.value})}},{key:"addDataOnClick",value:function(){var t=this.state.default_month_days,e=this.state.month_days,a=[];for(var n in e)null==t[n]&&(a[n]={text:e[n].text});var i=[];for(var s in t)""==e[s].text&&(i[s]={text:t[s].text});var o=[];for(var r in e)null!=t[r]&&""!=e[r].text&&t[r].text!=e[r].text&&(o[r]={text:e[r].text});a.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("add")}),this.dbUpdater("/addshiftdata",a)),i.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("delete")}),this.dbUpdater("/deleteshiftdata",i)),o.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("update")}),this.dbUpdater("/updateshiftdata",o)),fetch("/updatecommentdata",{method:"POST",body:JSON.stringify([this.state.comment]),headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(t){return t.json()}).then(function(t){return alert("\u767b\u9332\u3057\u307e\u3057\u305f")}),this.shiftupdateChecker("")}},{key:"dbUpdater",value:function(t,e){var a=this,n=[];for(var i in e)n.push({date:i,text:e[i].text});fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(t){return t.json()}).then(function(t){return a.shiftupdateChecker(t)})}},{key:"shiftupdateChecker",value:function(t){var e=this;if(""!=t){var a=[],n=!0,i=!1,s=void 0;try{for(var o,r=this.state.isUpdateshift[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var l=o.value;l!=t&&a.push(l)}}catch(c){i=!0,s=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}a.length<=0&&fetch("/shiftdata").then(function(t){return t.json()}).then(function(t){return e.setdefaultshifts(t)}),this.setState({isUpdateshift:a})}else this.state.isUpdateshift.length<=0&&fetch("/shiftdata").then(function(t){return t.json()}).then(function(t){return e.setdefaultshifts(t)})}}]),e}(n.Component),C=function(t){function e(){return Object(r.a)(this,e),Object(c.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Setting"))}}]),e}(n.Component),O={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};g.a.setAppElement("#root");var E=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).state={userdata:[],date:new Date,receptionDate:new Date,stamp:"x",stamptime:"",deadline:"",default_month_days:[],month_days:[],shifttimes:["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","23:45"],startTime:"09:00",endTime:"09:00",comment:"",modalIsOpen:!1,isUpdateshift:[]},a.setdefaultshifts=a.setdefaultshifts.bind(Object(f.a)(a)),a.getDateReception=a.getDateReception.bind(Object(f.a)(a)),a.commentOnchange=a.commentOnchange.bind(Object(f.a)(a)),a.openModal=a.openModal.bind(Object(f.a)(a)),a.afterOpenModal=a.afterOpenModal.bind(Object(f.a)(a)),a.closeModal=a.closeModal.bind(Object(f.a)(a)),a.setShiftTime=a.setShiftTime.bind(Object(f.a)(a)),a.startTimeChange=a.startTimeChange.bind(Object(f.a)(a)),a.endTimeChange=a.endTimeChange.bind(Object(f.a)(a)),a.addDataOnClick=a.addDataOnClick.bind(Object(f.a)(a)),a.shiftupdateChecker=a.shiftupdateChecker.bind(Object(f.a)(a)),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.getDateReception(),fetch("/testuserdata").then(function(t){return t.json()}).then(function(e){return t.setState({userdata:e})}),fetch("/testshiftdata").then(function(t){return t.json()}).then(function(e){return t.setdefaultshifts(e)}),fetch("/testgetcommentdata").then(function(t){return t.json()}).then(function(e){return t.setState({comment:e[0].text})})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement("h1",null,"\u30b7\u30d5\u30c8\u5e0c\u671b"),"\u3088\u3046\u3053\u305d",this.state.userdata.username,"\u3055\u3093",i.a.createElement(u.b,{to:"/Setting"},"\u8a2d\u5b9a"),i.a.createElement("a",{href:"/logout"},"logout"),i.a.createElement("h2",null,this.state.receptionDate.getFullYear()," ",this.state.receptionDate.getMonth()+1,"\u6708",this.state.receptionDate.getDate(),"\u65e5\uff5e\u53d7\u4ed8\u4e2d"),i.a.createElement("div",{id:"dateText"},this.state.deadline),i.a.createElement("button",{id:"batu",onClick:this.onClickstamp.bind(this,"x")},"\xd7"),i.a.createElement("button",{id:"sankaku",onClick:this.onClickstamp.bind(this,"\u25b3")},"\u25b3"),i.a.createElement("button",{id:"timeset",onClick:this.onClickstamp.bind(this,"time")},"Time"),i.a.createElement("div",{id:"calendar"}),i.a.createElement(b.a,{locale:"ja-JP",calendarType:"US",value:this.state.receptionDate,tileContent:this.getTileContent.bind(this),onChange:function(e){return t.dayClick(e)}}),i.a.createElement("div",null,"\u88dc\u8db3\u5e0c\u671b",i.a.createElement("input",{type:"textarea",name:"comment",value:this.state.comment,onChange:this.commentOnchange}),i.a.createElement("button",{onClick:this.addDataOnClick},"\u767b\u9332")),i.a.createElement(g.a,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,style:O,contentLabel:"Example Modal"},i.a.createElement("h2",null,"\u51fa\u52e4\u53ef\u80fd\u6642\u9593\u3092\u9078\u629e"),i.a.createElement("div",null,i.a.createElement("select",{onChange:this.startTimeChange,value:this.state.startTime},this.state.shifttimes.map(function(t){return i.a.createElement("option",{key:t},t)})),"\uff5e",i.a.createElement("select",{onChange:this.endTimeChange,value:this.state.endTime},this.state.shifttimes.map(function(t){return i.a.createElement("option",{key:t},t)}))),i.a.createElement("button",{onClick:this.closeModal},"\u9589\u3058\u308b"),i.a.createElement("button",{onClick:this.setShiftTime},"\u6c7a\u5b9a")))}},{key:"setdefaultshifts",value:function(t){var e=[],a=[],n=!0,i=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var l=o.value;a[l.date]={text:l.detail},e[l.date]={text:l.detail}}}catch(c){i=!0,s=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}this.setState({default_month_days:e,month_days:a})}},{key:"getFormatDate",value:function(t){return"".concat(t.getFullYear()).concat(("0"+(t.getMonth()+1)).slice(-2)).concat(("0"+t.getDate()).slice(-2))}},{key:"getDateReception",value:function(){var t=this.state.date.getFullYear(),e=this.state.date.getMonth()+1,a=this.state.date.getDate(),n="",i="";if(a<=10)n=e+"/10\u307e\u3067("+e+"/16\uff5e"+e+"/"+new Date(t,e,0).getDate()+")",i=t+"/"+e+"/16";else if(a>24){12==e&&(t++,e=0),n=e+1+"/10\u307e\u3067("+(e+1)+"/16\uff5e"+(e+1)+"/"+new Date(t,e,0).getDate()+")",i=t+"/"+(e+1)+"/16"}else 12==e&&(t++,e=0),n=e+"/24\u307e\u3067("+(e+1)+"/1\uff5e"+(e+1)+"/15)",i=t+"/"+(e+1)+"/1";this.setState({deadline:n,receptionDate:new Date(i)})}},{key:"getTileContent",value:function(t){var e=t.date;if("month"!==t.view)return null;var a=this.getFormatDate(e);return i.a.createElement("p",null,this.state.month_days[a]&&this.state.month_days[a].text?this.state.month_days[a].text:"  ")}},{key:"onClickstamp",value:function(t){this.setState({stamp:t})}},{key:"dayClick",value:function(t){if(this.state.receptionDate<=t){var e=this.state.month_days,a=t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2);this.setState({clickdate:a}),null==e[a]||""==e[a].text?"time"==this.state.stamp?this.openModal():(e[a]={text:this.state.stamp},this.setState({month_days:e})):this.state.stamp==e[a].text?(e[a]={text:""},this.setState({month_days:e})):this.state.stamp!=e[a].text&&("time"==this.state.stamp?e[a]={text:""}:(e[a]={text:this.state.stamp},this.setState({month_days:e})))}}},{key:"commentOnchange",value:function(t){this.setState({comment:t.target.value})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"setShiftTime",value:function(){if(this.state.startTime>=this.state.endTime)alert("\u4e0d\u53ef\u80fd\u306a\u6642\u9593\u3067\u3059");else{this.closeModal();var t=this.state.month_days;t[this.state.clickdate]={text:this.state.startTime+"-"+this.state.endTime},this.setState({month_days:t})}}},{key:"startTimeChange",value:function(t){this.setState({startTime:t.target.value})}},{key:"endTimeChange",value:function(t){this.setState({endTime:t.target.value})}},{key:"addDataOnClick",value:function(){var t=this.state.default_month_days,e=this.state.month_days,a=[];for(var n in e)null==t[n]&&(a[n]={text:e[n].text});var i=[];for(var s in t)""==e[s].text&&(i[s]={text:t[s].text});var o=[];for(var r in e)null!=t[r]&&""!=e[r].text&&t[r].text!=e[r].text&&(o[r]={text:e[r].text});a.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("add")}),this.dbUpdater("/testaddshiftdata",a)),i.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("delete")}),this.dbUpdater("/testdeleteshiftdata",i)),o.length>0&&(this.setState({isUpdateshift:this.state.isUpdateshift.concat("update")}),this.dbUpdater("/testupdateshiftdata",o)),fetch("/testupdatecommentdata",{method:"POST",body:JSON.stringify([this.state.comment]),headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(t){return t.json()}).then(function(t){return alert("\u767b\u9332\u3057\u307e\u3057\u305f")}),this.shiftupdateChecker("")}},{key:"dbUpdater",value:function(t,e){var a=this,n=[];for(var i in e)n.push({date:i,text:e[i].text});fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(t){return t.json()}).then(function(t){return a.shiftupdateChecker(t)})}},{key:"shiftupdateChecker",value:function(t){var e=this;if(""!=t){var a=[],n=!0,i=!1,s=void 0;try{for(var o,r=this.state.isUpdateshift[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var l=o.value;l!=t&&a.push(l)}}catch(c){i=!0,s=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}a.length<=0&&fetch("/testshiftdata").then(function(t){return t.json()}).then(function(t){return e.setdefaultshifts(t)}),this.setState({isUpdateshift:a})}else this.state.isUpdateshift.length<=0&&fetch("/testshiftdata").then(function(t){return t.json()}).then(function(t){return e.setdefaultshifts(t)})}}]),e}(n.Component),x=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).setRedirect=function(){a.setState({redirect:!0})},a.renderRedirect=function(){if(a.state.redirect)return i.a.createElement(m.a,{to:"/Home"})},a.getDBChecker=function(){console.log("dbcheck"),fetch("/dblocal").then(function(t){return t.json()}).then(function(t){a.setState({dbcheck:t})})},a.getTest=function(){console.log("test"),fetch("/testpageredirect").then(function(t){return t.json()})},a.state={dbcheck:[],test:[],redirect:!1},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},this.renderRedirect(),i.a.createElement("h1",null,"\u30ed\u30b0\u30a4\u30f3"),i.a.createElement("a",{href:"/auth"},"\u30ed\u30b0\u30a4\u30f3\uff12"),i.a.createElement("div",null,i.a.createElement("h2",null,"tester"),"------------------",i.a.createElement("br",null),i.a.createElement("a",{href:"/callback"},"callback"),i.a.createElement("br",null),i.a.createElement("a",{href:"/db"},"DBChecker"),i.a.createElement("br",null),this.state.dbcheck.map(function(t){return i.a.createElement("div",null,t.name)}),i.a.createElement("button",{onClick:this.getDBChecker},"DBChecker in local"),i.a.createElement("br",null),i.a.createElement(u.b,{to:"/Homelocal"},"HomeChecker in local"),i.a.createElement("form",{method:"post",action:"/Home"},"formtester",i.a.createElement("br",null)),"-------------------------"),i.a.createElement("button",{onClick:this.getTest},"tester"),this.state.test.map(function(t){return i.a.createElement("div",null,t.name)}),i.a.createElement("button",{onClick:this.setRedirect},"redirect"))}}]),e}(n.Component),S=function(){return i.a.createElement(u.a,null,i.a.createElement("div",null,i.a.createElement(m.b,{exact:!0,path:"/",component:x}),i.a.createElement(m.b,{path:"/Home",component:k}),i.a.createElement(m.b,{path:"./Setting",component:C}),i.a.createElement(m.b,{path:"/Testpage",component:k}),i.a.createElement(m.b,{path:"/Homelocal",component:E})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.b7d3d9b8.chunk.js.map